<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
	<constant name="struts.devMode" value="true"></constant>
	<constant name="struts.ui.theme" value="simple"></constant>
	
	<package name="basePack" extends="struts-default" abstract="true">
		<interceptors>
			<interceptor name="loginInterceptor" class="cn.wyx.interceptor.LoginInterceptor"></interceptor>
			<interceptor-stack name="ldStack">
				<interceptor-ref name="defaultStack"></interceptor-ref>
				<interceptor-ref name="loginInterceptor"></interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="ldStack"></default-interceptor-ref>
	</package>
	
	
	<package name="LD" extends="basePack">
	
		<!--后台页面跳转专用  -->
		<action name="LD_*">
			<result>/WEB-INF/system/{1}.jsp</result>
			<result name="none">/WEB-INF/system/{1}.jsp</result>
		</action>
		
		<!-- UsersAction专用转发器 -->
		<action name="user_*" class="userAction" method="user_{1}">
			<result name="success">/WEB-INF/system/user/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_u_*" class="userAction" method="ajax_u_{1}">
			<interceptor-ref name="ldStack">
				<param name="loginInterceptor.excludeMethods">ajax_u_login</param>
			</interceptor-ref>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>	
		
		<!-- AboutAction专用转发器 -->
		<action name="about_*" class="aboutAction" method="about_{1}">
			<result name="success">/WEB-INF/system/about/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_a_*" class="aboutAction" method="ajax_a_{1}">
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>	
		
		
		<!-- YewuAction专用转发器 -->
		<action name="yewu_*" class="yewuAction" method="yewu_{1}">
			<result name="success">/WEB-INF/system/yewu/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_y_*" class="yewuAction" method="ajax_y_{1}">
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>	
		
		<!-- ContactAction专用转发器 -->
		<action name="contact_*" class="contactAction" method="contact_{1}">
			<result name="success">/WEB-INF/system/contact/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_c_*" class="contactAction" method="ajax_c_{1}">
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>	
		
		<!-- AnliAction专用转发器 -->
		<action name="anli_*" class="anliAction" method="anli_{1}">
			<result name="success">/WEB-INF/system/anli/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_an_*" class="anliAction" method="ajax_an_{1}">
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>	
		
		<!-- HuodongAction专用转发器 -->
		<action name="huodong_*" class="huodongAction" method="huodong_{1}">
			<result name="success">/WEB-INF/system/huodong/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_h_*" class="huodongAction" method="ajax_h_{1}">
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>	
		
		<!-- FileAction专用转发器 -->
		<action name="fileup_*" class="fileupAction" method="fileup_{1}">
			<result name="success">/WEB-INF/system/fileup/{1}.jsp</result>
			<result name="none" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="ajax_f_*" class="fileupAction" method="ajax_f_{1}">
			<result name="none" type="redirectAction">LD_login</result>
			<result name="main" type="redirectAction">LD_login</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="filedown" class="fileupAction" method="filedown">
			<result name="success" type="stream">
				<!-- 指定Action中输入流变量 -->
				<param name="inputName">inputStream</param>
				<!-- 设置响应的消息头 Content-Disposition -->
				<param name="contentDisposition">attachment;filename=${fileName}</param>
				<!-- 使用下载的方式来返回结果 -->
				<param name="contentType">application/octet-stream</param>
				<!-- 配置文件的大小 -->
				<param name="contentLength">${fileLength}</param>
			</result>
		</action>
	</package>	
	
	<!-- =============================================================================================================== -->
	
	<package name="ld" extends="struts-default">
	
		<!--前台页面跳转专用  -->
		<action name="ld_*">
			<result>/homejsps/{1}.jsp</result>
			<result name="none">/WEB-INF/system/{1}.jsp</result>
		</action>
		
		<!-- AboutAction专用转发器 -->
		<action name="labout_*" class="aboutAction" method="about_{1}">
			<result name="success">/homejsps/about.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		
		<!-- YewuAction专用转发器 -->
		<action name="lyewu_*" class="yewuAction" method="yewu_{1}">
			<result name="success">/homejsps/yewu.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		
		<!-- ContactAction专用转发器 -->
		<action name="lcontact_*" class="contactAction" method="contact_{1}">
			<result name="success">/homejsps/contact.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		
		<!-- AnliAction专用转发器 -->
		<action name="lanli_*" class="anliAction" method="lanli_{1}">
			<result name="success">/homejsps/anli.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="llanli_*" class="anliAction" method="anli_{1}">
			<result name="success">/homejsps/details.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		
		<!-- HuodongAction专用转发器 -->
		<action name="lhuodong_*" class="huodongAction" method="huodong_{1}">
			<result name="success">/homejsps/huodong.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		<action name="llhuodong_*" class="huodongAction" method="huodong_{1}">
			<result name="success">/homejsps/huodongdetails.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		
		
		<!-- FileupAction专用转发器 -->
		<action name="lfileup_*" class="fileupAction" method="fileup_{1}">
			<result name="success">/homejsps/fileup.jsp</result>
			<result name="input">/WEB-INF/system/404.jsp</result>
		</action>
		
	</package>
</struts>
